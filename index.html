<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>22nd Bedstuy Halloween Crawl Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  body, html, #map { height: 100%; margin: 0; padding: 0; }
  #map { height: 100vh; }
  .loader { position: absolute; z-index:1000; left: 10px; top: 10px; background: white; padding: 8px; border-radius:6px; box-shadow:0 1px 4px rgba(0,0,0,0.3); }
</style>
</head>
<body>
<div class="loader" id="loader">Geocoding addresses... 0 / 317</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const addresses = ['374 Macdonough St, Brooklyn, NY', '95 Chauncey, Brooklyn, NY', '45 Chauncey, Brooklyn, NY', '53 Chauncey, Brooklyn, NY', '61 Chauncey, Brooklyn, NY', '63 Chauncey, Brooklyn, NY', '83 Chauncey, Brooklyn, NY', '95 Chauncey, Brooklyn, NY', '344 Chauncey, Brooklyn, NY', '368 Chauncey, Brooklyn, NY', '378 Chauncey, Brooklyn, NY', '380 Chauncey, Brooklyn, NY', '393 Chauncey, Brooklyn, NY', '419 Chauncey, Brooklyn, NY', '404 Stuyvesant Ave, Brooklyn, NY', '407 Stuyvesant Ave, Brooklyn, NY', '412 Stuyvesant Ave, Brooklyn, NY', '416 Stuyvesant Ave, Brooklyn, NY', '217 Stuyvesant Ave, Brooklyn, NY', '219 Stuyvesant Ave, Brooklyn, NY', '221 Stuyvesant Ave, Brooklyn, NY', '223 Stuyvesant Ave, Brooklyn, NY', '224 Stuyvesant Ave, Brooklyn, NY', '226 Stuyvesant Ave, Brooklyn, NY', '247 Stuyvesant Ave, Brooklyn, NY', '261 Stuyvesant Ave, Brooklyn, NY', '269 Stuyvesant Ave, Brooklyn, NY', '276 Stuyvesant Ave, Brooklyn, NY', '278 Stuyvesant Ave, Brooklyn, NY', '280 Stuyvesant Ave, Brooklyn, NY', '337 Stuyvesant Ave, Brooklyn, NY', '339 Stuyvesant Ave, Brooklyn, NY', '354 Stuyvesant Ave, Brooklyn, NY', '356 Stuyvesant Ave, Brooklyn, NY', '366 Stuyvesant Ave, Brooklyn, NY', '55 Bainbridge Street, Brooklyn, NY', '58 Bainbridge Street, Brooklyn, NY', '59 Bainbridge Street, Brooklyn, NY', '61 Bainbridge Street, Brooklyn, NY', '65 Bainbridge Street, Brooklyn, NY', '66 Bainbridge Street, Brooklyn, NY', '93 Bainbridge Street, Brooklyn, NY', '101 Bainbridge Street, Brooklyn, NY', '103 Bainbridge Street, Brooklyn, NY', '104 Bainbridge Street, Brooklyn, NY', '108 Bainbridge Street, Brooklyn, NY', '111 Bainbridge Street, Brooklyn, NY', '115 Bainbridge Street, Brooklyn, NY', '124 Bainbridge Street, Brooklyn, NY', '125 Bainbridge Street, Brooklyn, NY', '157 Bainbridge Street, Brooklyn, NY', '159 Bainbridge Street, Brooklyn, NY', '161 Bainbridge Street, Brooklyn, NY', '162 Bainbridge Street, Brooklyn, NY', '167 Bainbridge Street, Brooklyn, NY', '175 Bainbridge Street, Brooklyn, NY', '176 Bainbridge Street, Brooklyn, NY', '177 Bainbridge Street, Brooklyn, NY', '228 Bainbridge Street, Brooklyn, NY', '238 Bainbridge Street, Brooklyn, NY', '241 Bainbridge Street, Brooklyn, NY', '247 Bainbridge Street, Brooklyn, NY', '256 Bainbridge Street, Brooklyn, NY', '258 Bainbridge Street, Brooklyn, NY', '262 Bainbridge Street, Brooklyn, NY', '263A Bainbridge Street, Brooklyn, NY', '264 Bainbridge Street, Brooklyn, NY', '265 Bainbridge Street, Brooklyn, NY', '369 Bainbridge Street, Brooklyn, NY', '372A Bainbridge Street, Brooklyn, NY', '373 Bainbridge Street, Brooklyn, NY', '385 Bainbridge Street, Brooklyn, NY', '392A Bainbridge Street, Brooklyn, NY', '393 Bainbridge Street, Brooklyn, NY', '401 Bainbridge Street, Brooklyn, NY', '402 Bainbridge Street, Brooklyn, NY', '405 Bainbridge Street, Brooklyn, NY', '426A Lewis Avenue, Brooklyn, NY', '432 Lewis Avenue, Brooklyn, NY', '438 Lewis Avenue, Brooklyn, NY', '440 Lewis Avenue, Brooklyn, NY', '321 Decatur Street, Brooklyn, NY', '336 Decatur Street, Brooklyn, NY', '340 Decatur Street, Brooklyn, NY', '341 Decatur Street, Brooklyn, NY', '355 Decatur Street, Brooklyn, NY', '390 Decatur Street, Brooklyn, NY', '428 Decatur Street, Brooklyn, NY', '432 Decatur Street, Brooklyn, NY', '462A Decatur Street, Brooklyn, NY', '472 Decatur Street, Brooklyn, NY', '475 Decatur Street, Brooklyn, NY', '476 Decatur Street, Brooklyn, NY', '477 Decatur Street, Brooklyn, NY', '481 Decatur Street, Brooklyn, NY', '486 Decatur Street, Brooklyn, NY', '495 Decatur Street, Brooklyn, NY', '570 Decatur Street, Brooklyn, NY', '572 Decatur Street, Brooklyn, NY', '586 Decatur Street, Brooklyn, NY', '598 Decatur Street, Brooklyn, NY', '599 Decatur Street, Brooklyn, NY', '601 Decatur Street, Brooklyn, NY', '607 Decatur Street, Brooklyn, NY', '631 Decatur Street, Brooklyn, NY', '94 MacDonough St, Brooklyn, NY', '96 MacDonough St, Brooklyn, NY', '102 MacDonough St, Brooklyn, NY', '104 MacDonough St, Brooklyn, NY', '521 MacDonough St, Brooklyn, NY', '527 MacDonough St, Brooklyn, NY', '534 MacDonough St, Brooklyn, NY', '537 MacDonough St, Brooklyn, NY', '538 MacDonough St, Brooklyn, NY', '540 MacDonough St, Brooklyn, NY', '541 MacDonough St, Brooklyn, NY', '549 MacDonough St, Brooklyn, NY', '552 MacDonough St, Brooklyn, NY', '553A MacDonough St, Brooklyn, NY', '556 MacDonough St, Brooklyn, NY', '558 MacDonough St, Brooklyn, NY', '559 MacDonough St, Brooklyn, NY', '561 MacDonough St, Brooklyn, NY', '565 MacDonough St, Brooklyn, NY', '567 MacDonough St, Brooklyn, NY', '569 MacDonough St, Brooklyn, NY', '320 MacDonough St, Brooklyn, NY', '333 MacDonough St, Brooklyn, NY', '339 MacDonough St, Brooklyn, NY', '344 MacDonough St, Brooklyn, NY', '347 MacDonough St, Brooklyn, NY', '364 MacDonough St, Brooklyn, NY', '281 MacDonough St, Brooklyn, NY', '279 MacDonough St, Brooklyn, NY', '277 MacDonough St, Brooklyn, NY', '285 MacDonough St, Brooklyn, NY', '347 MacDonough St, Brooklyn, NY', '453 MacDonough St, Brooklyn, NY', '457 MacDonough St, Brooklyn, NY', '466 MacDonough St, Brooklyn, NY', '468A MacDonough St, Brooklyn, NY', '513 MacDonough St, Brooklyn, NY', '517 MacDonough St, Brooklyn, NY', '519 MacDonough St, Brooklyn, NY', '521 MacDonough St, Brooklyn, NY', '523 MacDonough St, Brooklyn, NY', '524 MacDonough St, Brooklyn, NY', '526 MacDonough St, Brooklyn, NY', '527 MacDonough St, Brooklyn, NY', '533 MacDonough St, Brooklyn, NY', '538 MacDonough St, Brooklyn, NY', '544 MacDonough St, Brooklyn, NY', '546 MacDonough St, Brooklyn, NY', '550 MacDonough St, Brooklyn, NY', '553 MacDonough St, Brooklyn, NY', '555 MacDonough St, Brooklyn, NY', '560 MacDonough St, Brooklyn, NY', '562 MacDonough St, Brooklyn, NY', '569 MacDonough St, Brooklyn, NY', '573 MacDonough St, Brooklyn, NY', '572 MacDonough St, Brooklyn, NY', '574 MacDonough St, Brooklyn, NY', '575 MacDonough St, Brooklyn, NY', '584 MacDonough St, Brooklyn, NY', '586 MacDonough St, Brooklyn, NY', '590 MacDonough St, Brooklyn, NY', '591 MacDonough St, Brooklyn, NY', '595 MacDonough St, Brooklyn, NY', '603 MacDonough St, Brooklyn, NY', '605 MacDonough St, Brooklyn, NY', '607 MacDonough St, Brooklyn, NY', '614 MacDonough St, Brooklyn, NY', '615 MacDonough St, Brooklyn, NY', '624 MacDonough St, Brooklyn, NY', '627 MacDonough St, Brooklyn, NY', '631 MacDonough St, Brooklyn, NY', '633 MacDonough St, Brooklyn, NY', '306 Malcom X Blvd, Brooklyn, NY', '332 Macon Street, Brooklyn, NY', '353 Macon Street, Brooklyn, NY', '367 Macon Street, Brooklyn, NY', '369 Macon Street, Brooklyn, NY', '373 Macon Street, Brooklyn, NY', '377 Macon Street, Brooklyn, NY', '378 Macon Street, Brooklyn, NY', '391 Macon Street, Brooklyn, NY', '393 Macon Street, Brooklyn, NY', '410 Macon Street, Brooklyn, NY', '456 Macon Street, Brooklyn, NY', '464 Macon Street, Brooklyn, NY', '652 Macon Street, Brooklyn, NY', '656 Macon Street, Brooklyn, NY', '657A Macon Street, Brooklyn, NY', '670 Macon Street, Brooklyn, NY', '682 Macon Street, Brooklyn, NY', '684 Macon Street, Brooklyn, NY', '874 Hancock Street, Brooklyn, NY', '336 Halsey Street, Brooklyn, NY', '443-A Halsey Street, Brooklyn, NY', '453 Halsey Street, Brooklyn, NY', '490 Halsey Street, Brooklyn, NY', '493 Halsey Street, Brooklyn, NY', '500 Halsey Street, Brooklyn, NY', '501 Halsey Street, Brooklyn, NY', '502 Halsey Street, Brooklyn, NY', '503 Halsey Street, Brooklyn, NY', '504 Halsey Street, Brooklyn, NY', '508 Halsey Street, Brooklyn, NY', '512 Halsey Street, Brooklyn, NY', '83 Saratoga Ave, Brooklyn, NY', '361 Lewis Avenue, Brooklyn, NY', '569 Jefferson Ave, Brooklyn, NY', '570 Jefferson Ave, Brooklyn, NY', '578 Jefferson Ave, Brooklyn, NY', '581 Jefferson Ave, Brooklyn, NY', '582 Jefferson Ave, Brooklyn, NY', '583 Jefferson Ave, Brooklyn, NY', '584 Jefferson Ave, Brooklyn, NY', '586 Jefferson Ave, Brooklyn, NY', '588 Jefferson Ave, Brooklyn, NY', '590 Jefferson Ave, Brooklyn, NY', '592 Jefferson Ave, Brooklyn, NY', '593 Jefferson Ave, Brooklyn, NY', '594 Jefferson Ave, Brooklyn, NY', '596 Jefferson Ave, Brooklyn, NY', '597 Jefferson Ave, Brooklyn, NY', '598A Jefferson Ave, Brooklyn, NY', '598 Jefferson Ave, Brooklyn, NY', '599 Jefferson Ave, Brooklyn, NY', '600 Jefferson Ave, Brooklyn, NY', '603 Jefferson Ave, Brooklyn, NY', '605 Jefferson Ave, Brooklyn, NY', '609 Jefferson Ave, Brooklyn, NY', '612A Jefferson Ave, Brooklyn, NY', '617 Jefferson Ave, Brooklyn, NY', '620 Jefferson Ave, Brooklyn, NY', '622 Jefferson Ave, Brooklyn, NY', '623 Jefferson Ave, Brooklyn, NY', '725 Jefferson Ave, Brooklyn, NY', '731 Jefferson Ave, Brooklyn, NY', '733 Jefferson Ave, Brooklyn, NY', '734 Jefferson Ave, Brooklyn, NY', '735 Jefferson Ave, Brooklyn, NY', '741 Jefferson Ave, Brooklyn, NY', '745 Jefferson Ave, Brooklyn, NY', '747 Jefferson Ave, Brooklyn, NY', '752 Jefferson Ave, Brooklyn, NY', '754 Jefferson Ave, Brooklyn, NY', '755 Jefferson Ave, Brooklyn, NY', '757 Jefferson Ave, Brooklyn, NY', '758 Jefferson Ave, Brooklyn, NY', '771 Jefferson Ave, Brooklyn, NY', '773 Jefferson Ave, Brooklyn, NY', '255 Hancock Street, Brooklyn, NY', '256 Hancock Street, Brooklyn, NY', '259 Hancock Street, Brooklyn, NY', '268 Hancock Street, Brooklyn, NY', '269 Hancock Street, Brooklyn, NY', '272 Hancock Street, Brooklyn, NY', '295 Hancock Street, Brooklyn, NY', '305 Hancock Street, Brooklyn, NY', '506 Hancock Street, Brooklyn, NY', '512 Hancock Street, Brooklyn, NY', '518 Hancock Street, Brooklyn, NY', '524 Hancock Street, Brooklyn, NY', '532A Hancock Street, Brooklyn, NY', '536 Hancock Street, Brooklyn, NY', '542 Hancock Street, Brooklyn, NY', '546 Hancock Street, Brooklyn, NY', '553 Hancock Street, Brooklyn, NY', '562 Hancock Street, Brooklyn, NY', '659 Putnam Ave, Brooklyn, NY', '666 Putnam Ave, Brooklyn, NY', '671 Putnam Ave, Brooklyn, NY', '674 Putnam Ave, Brooklyn, NY', '678 Putnam Ave, Brooklyn, NY', '679 Putnam Ave, Brooklyn, NY', '680 Putnam Ave, Brooklyn, NY', '682 Putnam Ave, Brooklyn, NY', '691 Putnam Ave, Brooklyn, NY', '701 Putnam Ave, Brooklyn, NY', '860 Putnam Ave, Brooklyn, NY', '569 Madison St, Brooklyn, NY', '573 Madison St, Brooklyn, NY', '576 Madison St, Brooklyn, NY', '577 Madison St, Brooklyn, NY', '578 Madison St, Brooklyn, NY', '581 Madison St, Brooklyn, NY', '585 Madison St, Brooklyn, NY', '588 Madison St, Brooklyn, NY', '595 Madison St, Brooklyn, NY', '602 Madison St, Brooklyn, NY', '333 Marcus Garvey Blvd, Brooklyn, NY', '231 Madison St, Brooklyn, NY', '239 Madison St, Brooklyn, NY', '259 Madison St, Brooklyn, NY', '273 Madison St, Brooklyn, NY', '279 Madison St, Brooklyn, NY', '287 Madison St, Brooklyn, NY', '830 Marcy Ave, Brooklyn, NY', '473 Monroe Street, Brooklyn, NY', '485 Monroe Street, Brooklyn, NY', '487 Monroe Street, Brooklyn, NY', '502A Monroe Street, Brooklyn, NY', '503 Monroe Street, Brooklyn, NY', '504 Monroe Street, Brooklyn, NY', '505 Monroe Street, Brooklyn, NY', '506 Monroe Street, Brooklyn, NY', '507 Monroe Street, Brooklyn, NY', '509 Monroe Street, Brooklyn, NY', '511A Monroe Street, Brooklyn, NY', '516 Monroe Street, Brooklyn, NY', '522 Monroe Street, Brooklyn, NY', '523 Monroe Street, Brooklyn, NY', '532 Monroe Street, Brooklyn, NY', '304 Tomkins Ave, Brooklyn, NY', '405 Tomkins Ave, Brooklyn, NY'];

const map = L.map('map').setView([40.6928, -73.9416], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

let bounds = L.latLngBounds();
const loader = document.getElementById('loader');

function geocodeAddress(addr, index, total) {
  const url = 'https://nominatim.openstreetmap.org/search?format=json&limit=1&q=' + encodeURIComponent(addr);
  return fetch(url)
    .then(resp => resp.json())
    .then(data => {
      if (data && data.length>0) {
        const lat = parseFloat(data[0].lat);
        const lon = parseFloat(data[0].lon);
        const marker = L.marker([lat, lon]).addTo(map).bindPopup('<b>' + addr + '</b>');
        bounds.extend([lat, lon]);
      }
      loader.textContent = 'Geocoding addresses... ' + (index+1) + ' / ' + total;
    })
    .catch(err => {
      console.error('Error geocoding', addr, err);
    });
}

async function geocodeAll() {
  for (let i=0; i<addresses.length; i++) {
    await geocodeAddress(addresses[i], i, addresses.length);
    await new Promise(resolve => setTimeout(resolve, 1100));
  }
  if (bounds.isValid()) {
    map.fitBounds(bounds.pad(0.2));
  }
  loader.style.display = 'none';
}

geocodeAll();
</script>
</body>
</html>
